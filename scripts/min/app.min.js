function publicFeed(o,r){o.details=[],r.fetchData().then(function(r){o.details=r},function(r){o.details=r})}function userPhotoId(o,r,e,t){o.userData=[],r.userPhotos=[],r.userPhotos.desc=[],r.userInfo=[],r.friendPic=[],o.myPublicPhoto=[],r.friendPhoto=[],r.myName,r.myFriendsPhoto=[],r.nameOfPic,o.myFriends=function(t,s){r.myName=s;var n="c2571fbbfd51eadf7913b812d9c4f502";o.params={jsoncallback:"JSON_CALLBACK"};var c="http://api.flickr.com/services/rest/?method=flickr.photos.getContactsPublicPhotos&api_key="+n+"&user_id="+t+"&&include_self=&format=json&callback=jsonFlickrFeed";o.getFriendsPhoto=function(){e.jsonp(c,{params:o.params}).success(function(e){console.log("friends photo call"),o.myPublicPhoto=e,console.log(e);for(k in o.myPublicPhoto.photos.photo){var t="http://farm"+e.photos.photo[k].farm+".staticflickr.com/"+e.photos.photo[k].server+"/"+e.photos.photo[k].id+"_"+e.photos.photo[k].secret+".jpg";r.friendPhoto.push(t)}}).error(function(){console.log("friends photo call error")})},o.getFriendsPhoto()},o.myFriendsPhotos=function(t,s){r.nameOfPic=s;var n="http://api.flickr.com/services/feeds/photos_friends.gne?&user_id="+t+"&format=json";o.params={jsoncallback:"JSON_CALLBACK"},e.jsonp(n,{params:o.params}).success(function(o){for(m in o.items)r.myFriendsPhoto.push(o.items[m])}).error(function(){console.log("my friends photo call error")})},o.myPublicPic=function(s){var n="c2571fbbfd51eadf7913b812d9c4f502";o.params={jsoncallback:"JSON_CALLBACK"};var c="http://api.flickr.com/services/rest/?method=flickr.people.getInfo&api_key="+n+"&user_id="+s+"&format=json",i=t.defer();if(o.getUserInfo=function(){return e.jsonp(c,{params:o.params}).success(function(o){i.resolve(o)}).error(function(){console.log("userinfo error"),i.rejected("Error Occurred")}),i.promise},o.getUserInfo().then(function(t){r.userInfo=t.person,r.imgUrl="http://farm"+r.userInfo.iconfarm+".staticflickr.com/"+r.userInfo.iconserver+"/buddyicons/"+r.userInfo.nsid+".jpg";var s="http://api.flickr.com/services/rest/?method=flickr.contacts.getPublicList&api_key="+n+"&user_id="+t.person.id+"&format=json";e.jsonp(s,{params:o.params}).success(function(o){r.friendInfo=o;for(k in r.friendInfo.contacts.contact){var e="http://farm"+o.contacts.contact[k].iconfarm+".staticflickr.com/"+o.contacts.contact[k].iconserver+"/buddyicons/"+o.contacts.contact[k].nsid+".jpg";r.friendInfo.contacts.contact[k].img=e}}).error(function(o){r.friendInfo.img=o,console.log("friendinfo error")})},function(o){console.log(o)}),""!==s){var a="http://api.flickr.com/services/rest/?method=flickr.photos.search&sort=date-taken-desc&api_key="+n+"&user_id="+s+"&per_page=30&format=json&callback=jsonFlickrApi",l=t.defer();o.getUserId=function(){return e.jsonp(a,{params:o.params}).success(function(o){l.resolve(o)}).error(function(){console.log("1st error"),l.resolve("Error Occurred")}),l.promise},o.getUserId().then(function(e){o.userData=e;for(var t in o.userData.photos.photo){var s="http://farm"+o.userData.photos.photo[t].farm+".staticflickr.com/"+o.userData.photos.photo[t].server+"/"+o.userData.photos.photo[t].id+"_"+o.userData.photos.photo[t].secret+".jpg";r.userPhotos.push(s)}},function(o){r.userPhotos=o,console.log(o)})}}}function friendList(o,r){o.details1=[],r.fetchData().then(function(r){o.details1=r},function(r){o.details1=r,console.log(r)})}var FlickrApp=angular.module("FlickrApp",["ngRoute"]);FlickrApp.controller("myController",publicFeed),FlickrApp.factory("fetchPhotos",function(o,r,e){var t="http://api.flickr.com/services/feeds/photos_public.gne?format=json&callback=jsonFlickrFeed",s=r.defer(),n={jsoncallback:"JSON_CALLBACK"};return{fetchData:function(){return e.$broadcast("loader_show"),o.jsonp(t,{params:n}).success(function(o){s.resolve(o)}).error(function(){s.resolve("Error Occurred")}),s.promise}}}),FlickrApp.controller("photoController",userPhotoId),FlickrApp.controller("FriendPic",friendList),FlickrApp.config(function(o){o.when("/",{controller:"myController",templateUrl:"templates/Publicphotos.html"}),o.when("/photos",{controller:"photoController",templateUrl:"templates/Userphotos.html"}),o.when("/aboutApp",{controller:"myController",templateUrl:"templates/aboutApp.html"}),o.when("/myFriend",{controller:"photoController",templateUrl:"templates/myFriendPhotos.html"}),o.when("/myFriends",{controller:"photoController",templateUrl:"templates/myFriends.html"}),o.otherwise({redirectTo:"/"})});