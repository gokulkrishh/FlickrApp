"use strict";angular.module("FlickrApp.controllers",[]).controller("myController",["$scope","fetchPhotos",function(o,r){o.details=[],r.fetchData().then(function(r){o.details=r},function(r){o.details=r})}]).controller("photoController",["$scope","$rootScope","$http","$q",function(o,r,t,e){o.userData=[],o.myPublicPhoto=[],r.userPhotos=[],r.userPhotos.desc=[],r.userInfo=[],r.friendPic=[],r.friendPhoto=[],r.myName,r.myFriendsPhoto=[],r.nameOfPic,o.params={jsoncallback:"JSON_CALLBACK"},o.api_key="c2571fbbfd51eadf7913b812d9c4f502",o.myPublicPic=function(s){var c="http://api.flickr.com/services/rest/?method=flickr.people.getInfo&api_key="+o.api_key+"&user_id="+s+"&format=json",n=e.defer();if(o.getUserInfo=function(){return t.jsonp(c,{params:o.params}).success(function(o){n.resolve(o)}).error(function(){n.reject("Error Occurred")}),n.promise},o.getUserInfo().then(function(e){r.userInfo=e.person,r.imgUrl="http://farm"+r.userInfo.iconfarm+".staticflickr.com/"+r.userInfo.iconserver+"/buddyicons/"+r.userInfo.nsid+".jpg";var s="http://api.flickr.com/services/rest/?method=flickr.contacts.getPublicList&api_key="+o.api_key+"&user_id="+e.person.id+"&format=json";t.jsonp(s,{params:o.params}).success(function(o){r.friendInfo=o;for(var t in r.friendInfo.contacts.contact){var e="http://farm"+o.contacts.contact[t].iconfarm+".staticflickr.com/"+o.contacts.contact[t].iconserver+"/buddyicons/"+o.contacts.contact[t].nsid+".jpg";r.friendInfo.contacts.contact[t].img=e}}).error(function(o){r.friendInfo.img=o})},function(o){console.log(o)}),""!==s){var i="http://api.flickr.com/services/rest/?method=flickr.photos.search&sort=date-taken-desc&api_key="+o.api_key+"&user_id="+s+"&per_page=24&format=json&callback=jsonFlickrApi",a=e.defer();o.getUserId=function(){return t.jsonp(i,{params:o.params}).success(function(o){a.resolve(o)}).error(function(){a.reject("Error Occurred")}),a.promise},o.getUserId().then(function(t){o.userData=t;for(var e in o.userData.photos.photo){var s="http://farm"+o.userData.photos.photo[e].farm+".staticflickr.com/"+o.userData.photos.photo[e].server+"/"+o.userData.photos.photo[e].id+"_"+o.userData.photos.photo[e].secret+".jpg";r.userPhotos.push(s)}},function(o){r.userPhotos=o})}},o.myFriendsPhotos=function(e,s){r.nameOfPic=s;var c="http://api.flickr.com/services/feeds/photos_friends.gne?&user_id="+e+"&format=json";t.jsonp(c,{params:o.params}).success(function(o){for(var t in o.items)r.myFriendsPhoto.push(o.items[t])}).error(function(){console.log("my friends photo call error")})},o.myFriends=function(e,s){r.myName=s;var c="http://api.flickr.com/services/rest/?method=flickr.photos.getContactsPublicPhotos&api_key="+o.api_key+"&user_id="+e+"&&include_self=&format=json&callback=jsonFlickrFeed";o.getFriendsPhoto=function(){t.jsonp(c,{params:o.params}).success(function(t){o.myPublicPhoto=t;for(var e in o.myPublicPhoto.photos.photo){var s="http://farm"+t.photos.photo[e].farm+".staticflickr.com/"+t.photos.photo[e].server+"/"+t.photos.photo[e].id+"_"+t.photos.photo[e].secret+".jpg";r.friendPhoto.push(s)}}).error(function(){console.log("friends photo call error")})},o.getFriendsPhoto()}}]);